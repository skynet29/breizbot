$$.control.registerControl("rootPage",{template:'<div class="titlebar"><strong bn-text="fileName"></strong></div>\n<div class="toolbar">\n\t<div class="group">\n\t\t<button title="New File" bn-event="click: onNewFile" class="w3-button">\n\t\t\t<i class="fa fa-file"></i></button>\n\t\t<button title="Save File" bn-event="click: onSaveFile" class="w3-button">\n\t\t\t<i class="fa fa-save"></i></button>\n\t\t<button title="Open File" bn-event="click: onOpenFile" class="w3-button">\n\t\t\t<i class="fa fa-folder-open"></i></button>\n\t\t<span class="separator"></span>\n\n\t</div>\n\t<div class="group">\n\t\t<button title="Insert image" bn-event="click: onInsertImage" class="w3-button">\n\t\t\t<i class="fa fa-image"></i></button>\n\t\n\t</div>\n\n</div>\n<div bn-control="breizbot.htmleditor" bn-iface="editor"></div>',deps:["breizbot.files","breizbot.pager"],init:function(t,e,n){const i=$$.viewController(t,{data:{fileName:"",rootDir:""},events:{onInsertImage:function(){i.scope.editor.insertImage()},onNewFile:function(t){i.scope.editor.html(""),i.setData({fileName:""})},onSaveFile:async function(t){if(""!=i.model.fileName)return void o();let e=await $$.ui.showPrompt({title:"Save File",label:"FileName:"});null!=e&&(e+=".hdoc",i.setData({fileName:e,rootDir:"/apps/editor"}),o())},onOpenFile:function(t){n.pushPage("breizbot.files",{title:"Open File",props:{filterExtension:"hdoc"},events:{fileclick:function(t,e){n.popPage(e)}},onReturn:function(t){const{fileName:n,rootDir:o}=t,l=e.fileUrl(o+n);i.setData({fileName:n,rootDir:o}),i.scope.editor.load(l)}})}}});async function o(){const{fileName:t,rootDir:n}=i.model,o=i.scope.editor.html(),l=new Blob([o],{type:"text/html"});await e.saveFile(l,t,n)}}});