$$.control.registerControl("rootPage",{template:'<div class="titlebar"><strong bn-text="fileName"></strong></div>\n<div class="toolbar">\n\t<div class="group">\n\t\t<button title="New File" bn-event="click: onNewFile" class="w3-button">\n\t\t\t<i class="fa fa-file"></i></button>\n\t\t<button title="Save File" bn-event="click: onSaveFile" class="w3-button">\n\t\t\t<i class="fa fa-save"></i></button>\n\t\t<button title="Open File" bn-event="click: onOpenFile" class="w3-button">\n\t\t\t<i class="fa fa-folder-open"></i></button>\n\n\t</div>\n\n</div>\n<div bn-control="breizbot.htmleditor" bn-iface="editor" bn-data="{useDataUrlForImg: true}"></div>',deps:["breizbot.files","breizbot.pager"],init:function(t,e,i){const o=$$.viewController(t,{data:{fileName:"",rootDir:""},events:{onNewFile:function(t){o.scope.editor.html(""),o.setData({fileName:""})},onSaveFile:async function(t){if(""!=o.model.fileName)return void n();let e=await $$.ui.showPrompt({title:"Save File",label:"FileName:"});null!=e&&(e+=".hdoc",o.setData({fileName:e,rootDir:"/apps/editor"}),n())},onOpenFile:function(t){i.pushPage("breizbot.files",{title:"Open File",props:{filterExtension:"hdoc"},events:{fileclick:function(t,e){i.popPage(e)}},onReturn:function(t){const{fileName:i,rootDir:n}=t,l=e.fileUrl(n+i);o.setData({fileName:i,rootDir:n}),o.scope.editor.load(l)}})}}});async function n(){const{fileName:t,rootDir:i}=o.model,n=o.scope.editor.html(),l=new Blob([n],{type:"text/html"});await e.saveFile(l,t,i)}}});