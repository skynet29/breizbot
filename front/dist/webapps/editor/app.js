$$.control.registerControl("rootPage",{template:'<div class="titlebar"><strong bn-text="fileName"></strong></div>\n<div class="toolbar">\n\t<div class="group">\n\t\t<button title="New File" bn-event="click: onNewFile" class="w3-button">\n\t\t\t<i class="fa fa-file"></i></button>\n\t\t<button title="Save File" bn-event="click: onSaveFile" class="w3-button">\n\t\t\t<i class="fa fa-save"></i></button>\n\t\t<button title="Open File" bn-event="click: onOpenFile" class="w3-button">\n\t\t\t<i class="fa fa-folder-open"></i></button>\n\n\t</div>\n\n</div>\n<div bn-control="breizbot.htmleditor" bn-iface="editor" bn-data="{useDataUrlForImg: true}"></div>',deps:["breizbot.files","breizbot.pager"],init:function(t,e,i){const n=$$.viewController(t,{data:{fileName:""},events:{onNewFile:function(t){n.scope.editor.html(""),n.setData({fileName:""})},onSaveFile:async function(t){let{fileName:e,rootDir:i}=n.model;""==e?null!=(e=await $$.ui.showPrompt({title:"Save File",label:"FileName:"}))&&(e+=".hdoc",await o(e,{checkExists:!0})&&n.setData({fileName:e})):await o(e,{checkExists:!1,destPath:i})},onOpenFile:function(t){i.pushPage("breizbot.files",{title:"Open File",props:{filterExtension:"hdoc"},events:{fileclick:function(t,e){i.popPage(e)}},onReturn:function(t){const{fileName:i,rootDir:o}=t,l=e.fileUrl(o+i);n.setData({fileName:i,rootDir:o}),n.scope.editor.load(l)}})}}});async function o(t,i){const o=n.scope.editor.html(),l=new Blob([o],{type:"text/html"});return e.saveFile(l,t,i)}}});