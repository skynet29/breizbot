$$.control.registerControl("imagePage",{deps:["breizbot.files"],template:'<div style="overflow: auto; height: 100%; text-align: center;">\n\t<img bn-attr="{src: url}">\t\n</div>\n',props:{$pager:null,fileName:""},init:function(e,t){const{$pager:o,fileName:n}=this.props;$$.viewController(e,{data:{url:t.fileUrl(n)}});this.onAction=function(e){$$.ui.showConfirm({title:"Remove file",content:"Are you sure ?"},function(){t.removeFiles([n]).then(function(e){console.log("resp",e),o.popPage("reload")}).catch(function(e){console.log("resp",e),$$.ui.showAlert({content:e.responseText,title:"Error"})})})}}}),$$.control.registerControl("rootPage",{deps:["breizbot.files"],template:'<div bn-control="breizbot.files" \n\tstyle="height: 100%"\n\tbn-event="fileclick: onFileClick"\n\tbn-iface="files"\n\tdata-show-thumbnail="true"\n\t></div>',props:{$pager:null},init:function(e,t){const{$pager:o}=this.props,n=$$.viewController(e,{data:{},events:{onFileClick:function(e,t){console.log("onFileClick",t);const{fileName:n,rootDir:i,isImage:l}=t;l&&o.pushPage("imagePage",{title:n,props:{fileName:i+n},buttons:[{name:"del",label:"Delete"}]})}}});this.onReturn=function(e){console.log("onReturn",e),"reload"===e&&n.scope.files.update()}}});