$$.control.registerControl("imagePage",{deps:["breizbot.files"],template:'<div bn-control="brainjs.image" bn-data="{src: url}" style="height: 100%" bn-iface="image"></div>',props:{$pager:null,rootDir:"",fullName:""},init:function(e,o){const{$pager:t,fullName:n}=this.props,i=$$.viewController(e,{data:{url:o.fileUrl(n)}});this.onAction=function(e){"del"==e&&$$.ui.showConfirm({title:"Remove file",content:"Are you sure ?"},function(){o.removeFiles([n]).then(function(e){console.log("resp",e),t.popPage("reload")}).catch(function(e){console.log("resp",e),$$.ui.showAlert({content:e.responseText,title:"Error"})})}),"fit"==e&&i.scope.image.fitImage()}}}),$$.control.registerControl("rootPage",{deps:["breizbot.files"],template:'<div bn-control="breizbot.files" \n\tstyle="height: 100%"\n\tbn-event="fileclick: onFileClick"\n\tbn-iface="files"\n\tdata-show-thumbnail="true"\n\tdata-show-toolbar="true"\n\t></div>',props:{$pager:null},init:function(e,o){const{$pager:t}=this.props,n=$$.viewController(e,{data:{},events:{onFileClick:function(e,o){console.log("onFileClick",o);const{fileName:n,rootDir:i,isImage:l}=o,r=i+n;l&&t.pushPage("imagePage",{title:n,props:{fullName:r},buttons:[{name:"del",icon:"fa fa-trash"},{name:"fit",icon:"fa fa-expand"}]}),n.endsWith(".pdf")&&t.pushPage("pdfPage",{title:n,props:{fullName:r},buttons:[{name:"del",icon:"fa fa-trash"}]}),n.endsWith(".ogg")&&t.pushPage("soundPage",{title:n,props:{fullName:r},buttons:[{name:"del",icon:"fa fa-trash"}]})}}});this.onReturn=function(e){console.log("onReturn",e),"reload"===e&&n.scope.files.update()}}}),$$.control.registerControl("pdfPage",{deps:["breizbot.files"],template:'<div bn-control="breizbot.pdf" bn-data="{url}" style="height: 100%"></div>',props:{$pager:null,fullName:""},init:function(e,o){const{$pager:t,fullName:n}=this.props;$$.viewController(e,{data:{url:o.fileUrl(n)}});this.onAction=function(e){"del"==e&&$$.ui.showConfirm({title:"Remove file",content:"Are you sure ?"},function(){o.removeFiles([n]).then(function(e){console.log("resp",e),t.popPage("reload")}).catch(function(e){console.log("resp",e),$$.ui.showAlert({content:e.responseText,title:"Error"})})})}}}),$$.control.registerControl("soundPage",{deps:["breizbot.files"],template:'<div>\n\t<audio bn-attr="{src: url}" controls="" controlsList=nodownload></audio>\n</div>',props:{$pager:null,rootDir:"",fullName:""},init:function(e,o){const{$pager:t,fullName:n}=this.props;$$.viewController(e,{data:{url:o.fileUrl(n)}});this.onAction=function(e){"del"==e&&$$.ui.showConfirm({title:"Remove file",content:"Are you sure ?"},function(){o.removeFiles([n]).then(function(e){console.log("resp",e),t.popPage("reload")}).catch(function(e){console.log("resp",e),$$.ui.showAlert({content:e.responseText,title:"Error"})})})}}});