$$.control.registerControl("addFriendPage",{deps:["breizbot.users","breizbot.params"],template:'<div bn-control="breizbot.searchbar" \n\tbn-bind="searchbar"\n\tbn-event="searchbarsubmit: onSearch"\n\tdata-placeholder="Search username"></div>\n\n<div class="scrollPanel">\n\t<p bn-show="show1">No results</p>\n\t<ul class="w3-ul w3-border w3-white" \n\t\tbn-event="click.invit: onInvit"\n\t\tbn-each="friends"\n\t\tbn-show="!show1"\n\t\t>\n\t\t<li class="w3-bar">\n\t\t\t<span class="w3-button w3-right invit" title="Invit" bn-data="{username: $scope.$i.username}"><i class="fa fa-plus"></i></span>\n\n\t\t\t<div class="w3-bar-item">\n\t\t\t\t<i class="fa fa-user w3-text-blue"></i>\n\t\t\t\t<span bn-text="$scope.$i.username"></span><br>\n\t\t\t\t<i class="fa fa-map-marker-alt w3-text-blue"></i>\n\t\t\t\t<span bn-text="$scope.$i.location"></span>\n\t\t\t</div>\n\t\t</li>\n\t</ul>\t\t\n</div>\n',props:{friends:[]},init:function(t,n,e){const s=this.props.friends,i=$$.viewController(t,{data:{friends:[],show1:function(){return 0==this.friends.length}},events:{onSearch:async function(t,s){console.log("onSearch",s);const a=await n.match(s.value);i.setData({friends:a.filter(t=>t.username!=e.$userName)})},onInvit:async function(t){const e=$(this).data("username");console.log("onInvit",e),s.includes(e)?$$.ui.showAlert({title:"Warning",content:`\n\t\t\t\t\t\t\tUser <strong>${e}</strong> is already your friend\n\t\t\t\t\t\t\t`}):(await n.sendNotif(e,{type:"invit"}),$$.ui.showAlert({title:"Add Friend",content:`An invitation was sent to user <strong>${e}</strong>`}))}}})}}),$$.control.registerControl("rootPage",{template:'<div class="toolbar">\n\t<button \n\t\tclass="w3-button" \n\t\ttitle="Update"\n\t\tbn-event="click: onUpdate"\n\n\t><i class="fa fa-redo"></i></button>\t\n\n\t<button \n\t\tclass="w3-button" \n\t\ttitle="Add Friend"\n\t\tbn-event="click: onAddFriend"\n\n\t><i class="fa fa-user-plus"></i></button>\t\n</div>\n<div bn-control="breizbot.friends" bn-iface="friends" data-show-send-message="true"></div>',deps:["breizbot.pager"],init:function(t,n){const e=$$.viewController(t,{data:{},events:{onAddFriend:function(t){console.log("onAddFriend"),n.pushPage("addFriendPage",{title:"Add Friend",props:{friends:e.scope.friends.getFriends()}})},onUpdate:function(){e.scope.friends.update()}}})}});