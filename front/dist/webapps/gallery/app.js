$$.control.registerControl("gallery",{template:'<div class="content">\n\t<div bn-control="brainjs.image" bn-data="{src}"></div>\n\t<div class="buttons">\n\t\t<div>\n\t\t\t<button \n\t\t\t\tclass="w3-button w3-circle w3-blue-grey" \n\t\t\t\tbn-show="idx > 0"\n\t\t\t\tbn-event="click: onPrevImage"\n\t\t\t\t><i class="fa fa-angle-left"></i>\n\t\t\t</button>\t\t\n\t\t</div>\n\t\t<div>\n\t\t\t<button \n\t\t\t\tclass="w3-button w3-circle w3-blue-grey"  \n\t\t\t\tbn-show="idx < nbImages - 1"\n\t\t\t\tbn-event="click: onNextImage"\n\t\t\t\t>\n\t\t\t\t<i class="fa fa-angle-right"></i>\n\t\t\t</button>\t\n\t\t</div>\n\n\t</div>\t\n</div>\n<div class="band w3-blue-grey" bn-bind="band">\n\t<div bn-each="thumbnails" bn-event="click.image: onImageClick" bn-style="{width}">\n\t\t<img bn-attr="{src: $i}" class="image">\t\t\t\n\t</div>\n</div>\n',deps:["breizbot.files"],props:{rootDir:"",files:[],firstIdx:0},init:function(t,n){const{rootDir:e,files:i,firstIdx:o}=this.props,l=$$.viewController(t,{data:{idx:o,nbImages:i.length,src:a(o),thumbnails:i.map(t=>n.fileThumbnailUrl(e+t.name,"?x50")),width:i.reduce((t,n)=>{const{width:e,height:i}=n.dimension;return t+50*e/i+5},0)+"px"},events:{onPrevImage:function(){l.model.idx--,s()},onNextImage:function(){l.model.idx++,s()},onImageClick:function(){const t=$(this).index();l.model.idx=t,s()}}});function s(){l.setData({src:a(l.model.idx)}),l.scope.band.find("img.selected").removeClass("selected");const t=l.scope.band.find("img").eq(l.model.idx);t.addClass("selected"),t.get(0).scrollIntoView()}function a(t){return n.fileUrl(e+i[t].name)}s()}}),$$.control.registerControl("rootPage",{template:'<div \n\tbn-control="breizbot.files" \n\tbn-data="{imageOnly: true, showThumbnail: true}"\n\tbn-event="fileclick: onFileClick"\n\tbn-iface="files"\n\t></div>',props:{$pager:null},init:function(t){const{$pager:n}=this.props,e=$$.viewController(t,{data:{},events:{onFileClick:function(t,i){console.log("onFileClick",i);const{rootDir:o,fileName:l}=i,s=e.scope.files.getFiles();console.log("files",s);const a=s.findIndex(t=>t.name==l);console.log("firstIdx",a),n.pushPage("gallery",{title:"Diaporama",props:{firstIdx:a,files:s,rootDir:o}})}}})}});