$$.control.registerControl("rootPage",{deps:["breizbot.broker"],template:'<div class="message w3-text-red" bn-show="!homeboxConnected">Homebox not connected</div>\n<div class="scrollPanel" bn-show="homeboxConnected">\n    <table class="w3-table-all w3-small">\n        <thead>\n            <tr class="w3-green">\n                <th>Agent Name</th>\n                <th>State</th>\n                <th>Pid</th>\n                <th>Action</th>\n            </tr>\n        </thead>\n        <tbody bn-each="agents" bn-event="click.actionStart: onActionStart, click.actionStop: onActionStop, click.actionStopForce: onActionStopForce">\n  \t\t\t<tr>\n\t\t\t\t<td bn-text="$scope.$i.agent"></td>\n\t\t\t\t<td bn-text="$scope.$i.state"></td>\n\t\t\t\t<td bn-text="$scope.$i.pid"></td>\n\t\t\t\t<td bn-data="{agent: $scope.$i.agent}">\n\t\t\t\t\t<button class="actionStart w3-btn w3-blue" bn-show="!isRunning">Start</button>\n\t\t\t\t\t<button class="actionStop w3-btn w3-blue"  bn-show="isRunning">Stop</button>\n\t\t\t\t\t<button class="actionStopForce w3-btn w3-red" bn-show="isRunning">Kill</button>\n\t\t\t\t</td>\n\t\t\t</tr>      \t\n\n        </tbody>\n    </table>\n</div>',init:function(t,n){const o=$$.viewController(t,{data:{agents:[],homeboxConnected:!1,isRunning:function(t){return 0!=t.$i.pid}},events:{onActionStart:function(){const t=$(this).closest("td").data("agent");console.log("actionStart",t),n.emitTopic("homebox.launcher.startAgent",t)},onActionStop:function(){const t=$(this).closest("td").data("agent");console.log("actionStop",t),n.emitTopic("homebox.launcher.stopAgent",t)},onActionStopForce:function(){const t=$(this).closest("td").data("agent");console.log("actionStopForce",t),n.emitTopic("homebox.launcher.stopAgent",{agent:t,force:!0})}}});n.register("homebox.launcher.status",t=>{!function(t){const n=[];for(var e in t){var a=t[e];n.push({pid:a.pid,agent:e,state:a.state})}o.setData({agents:n})}(t.data)}),n.register("breizbot.homebox.status",t=>{o.setData({homeboxConnected:t.data.connected})})}});