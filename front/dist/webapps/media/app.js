$$.control.registerControl("rootPage",{template:'<div bn-control="breizbot.media" \n\tstyle="height: 100%"\n\tbn-event="fileclick: onFileClick"\n\tbn-iface="files"\n\t></div>',props:{$pager:null},init:function(o){const{$pager:e}=this.props,t=$$.viewController(o,{data:{},events:{onFileClick:function(o,t){console.log("onFileClick",t);const{fileName:n,rootDir:i,isImage:l}=t,r=i+n;(n.endsWith(".ogg")||n.endsWith(".mp3"))&&e.pushPage("soundPage",{title:n,props:{fullName:r}}),n.endsWith(".mp4")&&e.pushPage("videoPage",{title:n,props:{fullName:r}})}}});this.onReturn=function(o){console.log("onReturn",o),"reload"===o&&t.scope.files.update()}}}),$$.control.registerControl("soundPage",{deps:["breizbot.files"],template:'<div>\n\t<audio bn-attr="{src: url}" controls="" controlsList=nodownload></audio>\n</div>',props:{$pager:null,rootDir:"",fullName:""},buttons:[{name:"del",icon:"fa fa-trash"}],init:function(o,e){const{$pager:t,fullName:n}=this.props;$$.viewController(o,{data:{url:e.fileUrl(n)}});this.onAction=function(o){"del"==o&&$$.ui.showConfirm({title:"Remove file",content:"Are you sure ?"},function(){e.removeFiles([n]).then(function(o){console.log("resp",o),t.popPage("reload")}).catch(function(o){console.log("resp",o),$$.ui.showAlert({content:o.responseText,title:"Error"})})})}}}),$$.control.registerControl("videoPage",{deps:["breizbot.files"],template:'<div>\n\t<video bn-attr="{src: url}" controls="" controlsList=nodownload></video>\n</div>',props:{$pager:null,rootDir:"",fullName:""},buttons:[{name:"del",icon:"fa fa-trash"}],init:function(o,e){const{$pager:t,fullName:n}=this.props;$$.viewController(o,{data:{url:e.fileUrl(n)}});this.onAction=function(o){"del"==o&&$$.ui.showConfirm({title:"Remove file",content:"Are you sure ?"},function(){e.removeFiles([n]).then(function(o){console.log("resp",o),t.popPage("reload")}).catch(function(o){console.log("resp",o),$$.ui.showAlert({content:o.responseText,title:"Error"})})})}}});