$$.control.registerControl("rootPage",{template:'<h1>Code Morse Visuel</h1>\n<form bn-event="submit: playMorse">\n    <input type="text" placeholder="Entrez un mot" name="text" required/>\n    <button type="submit"">Envoyer</button>\n</form>\n\n\n<div class="led" bn-class="{on: ledOn}"></div>\n<div bn-text="morseOutput" class="morseOutput"></div>\n<div class="soundPanel">\n    <label>Sound</label>\n    <div bn-control="brainjs.flipswitch" bn-val="soundOn" bn-update="flipswitchchange"></div>\n</div>\n',deps:["breizbot.pager"],props:{},init:function(t,e){const n={a:".-",b:"-...",c:"-.-.",d:"-..",e:".",f:"..-.",g:"--.",h:"....",i:"..",j:".---",k:"-.-",l:".-..",m:"--",n:"-.",o:"---",p:".--.",q:"--.-",r:".-.",s:"...",t:"-",u:"..-",v:"...-",w:".--",x:"-..-",y:"-.--",z:"--..",0:"-----",1:".----",2:"..---",3:"...--",4:"....-",5:".....",6:"-....",7:"--...",8:"---..",9:"----."};async function o(t,e){i.setData({ledOn:!0}),e&&function(t=200,e=600){const n=new AudioContext,o=n.createOscillator(),a=n.createGain();o.frequency.value=e,o.connect(a),a.connect(n.destination),o.start(),a.gain.setValueAtTime(1,n.currentTime),o.stop(n.currentTime+t/1e3)}("."===t?200:600),await $$.util.wait("."===t?200:600),i.setData({ledOn:!1}),await $$.util.wait(200)}function a(t){return t.toLowerCase().split("").map(t=>" "===t?"/":n[t]||"").join(" ")}const i=$$.viewController(t,{data:{ledOn:!1,morseOutput:"",soundOn:!1},events:{playMorse:async function(t){t.preventDefault();const{text:e}=$(this).getFormData(),{soundOn:s}=i.model;i.setData({morseOutput:a(e)});for(let t of e.toLowerCase())if(n[t]){const e=n[t];for(let t of e)await o(t,s);await $$.util.wait(600)}else" "===t&&await $$.util.wait(1e3)}}})}});