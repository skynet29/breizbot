$$.control.registerControl("rootPage",{template:'<div class="toolbar">\n\t<button class="w3-button w3-blue" bn-event="click: onOpenFile"><i class="fa fa-folder-open"></i></button>\n\t<div bn-text="title"></div>\n\t<div class="pages" bn-show="title != \'\'">\n\t\t<div>\n\t\t\t<button class="w3-button" title="previous page" bn-event="click: onPrevPage">\n\t\t\t\t<i class="fa fa-angle-left"></i>\n\t\t\t</button>\t\t\t\n\t\t\t<button class="w3-button" title="next page" bn-event="click: onNextPage">\n\t\t\t\t<i class="fa fa-angle-right"></i>\n\t\t\t</button>\t\t\t\n\t\t</div>\n\t\t<div>\n\t\t\tPages: <span bn-text="currentPage"></span> / <span bn-text="numPages"></span>\t\t\n\t\t</div>\n\t</div>\n</div>\n\t\n<div class="content">\n\t<div bn-control="brainjs.pdf" \n\t\tbn-data="{worker: \'/brainjs/pdf/worker.js\'}"\n\t\tbn-iface="pdf"\n\t\t \n\t></div>\t\t\n</div>',deps:["breizbot.files"],props:{$pager:null},init:function(t,e){const{$pager:n}=this.props,o=$$.viewController(t,{data:{numPages:0,title:"",currentPage:1,zoomLevel:1},events:{onOpenFile:function(t){console.log("onOpenFile"),n.pushPage("openFilePage",{title:"Open File"})},onNextPage:function(t){console.log("onNextPage");let{currentPage:e,numPages:n}=o.model;e<n&&(e++,l().then(()=>{o.setData({currentPage:e})}))},onPrevPage:function(t){console.log("onPrevPage");let{currentPage:e,numPages:n}=o.model;e>1&&(e--,l().then(()=>{o.setData({currentPage:e})}))}}});function l(){const{zoomLevel:t,currentPage:e}=o.model;return o.scope.pdf.renderPage(e,t)}this.onReturn=function(t){if(null==t)return;const n=t.rootDir+t.fileName,i=e.fileUrl(n),{pdf:a}=o.scope;a.openFile(i).then(()=>{console.log("file loaded"),l().then(()=>{o.setData({title:t.fileName,numPages:a.getNumPages()})})})}}}),$$.control.registerControl("openFilePage",{template:'<div bn-control="breizbot.files" \n\tbn-event="fileclick: onFileClick"\n\tdata-show-toolbar="false"\n\tbn-data="{filterExtension: \'.pdf\', showThumbnail: false}"\n\t></div>',props:{$pager:null},init:function(t){const{$pager:e}=this.props;$$.viewController(t,{data:{},events:{onFileClick:function(t,n){console.log("onFileClick",n),e.popPage(n)}}})}});