$$.control.registerControl("rootPage",{template:'<div\n\tbn-control="brainjs.slider",\n\tdata-orientation=\'vertical\',\n\tclass="slider"\n\tbn-show="hasZoom"\n\tbn-event="slidechange: onZoomChange"\n\tbn-iface="slider"\n></div>\n\n<div class="main w3-pale-blue">\n\t<div bn-show="showMessage">Sorry, no video device found !</div>\n\t<div \n\t\tbn-control="brainjs.camera" \n\t\tbn-event="cameraready: onCameraReady, barcode: onBarcode"\n\t\tbn-data="{\n\t\t\tconstraints: {\n\t\t\t\tvideo: {\n\t\t\t\t\tfacingMode: \'environment\'\n\t\t\t\t}\n\t\t\t}\n\t\t}"\n\t\tbn-iface="camera">\n\t\t\t\n\t\t</div>\t\n\t\n</div>\n',init:function(t){const e=$$.viewController(t,{data:{showMessage:!1,hasZoom:!1},events:{onBarcode:function(t,e){console.log("onBarcode",e);const{format:o,rawValue:a}=e;let s=null;s="qr_code"==o?{link:`<a href="${a}" target="_blank">${a}</a>`}:{format:o,value:a},$$.ui.showAlert({title:"BarCode Detected",content:s},()=>{n.startBarcodeDetection()})},onCameraReady:async function(t){console.log("onCameraReady");const o=await n.getCapabilities();if(console.log("capabilities",o),o.zoom){const t=n.getSettings(),{min:a,max:s,step:i}=o.zoom;e.scope.slider.setData({min:a,max:s,step:i}),e.scope.slider.setValue(t.zoom),e.setData({hasZoom:!0})}n.startBarcodeDetection()},onZoomChange:function(t){const e=$(this).getValue();console.log("onZoomChange",e),n.setZoom(e)}}}),n=e.scope.camera;$$.media.getVideoDevices().then(t=>{t.length>0?n.start():e.setData({showMessage:!0})})}});