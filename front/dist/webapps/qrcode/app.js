$$.control.registerControl("rootPage",{template:'<div\n\tbn-control="brainjs.slider",\n\tdata-orientation=\'vertical\',\n\tclass="slider"\n\tbn-show="hasZoom"\n\tbn-event="slidechange: onZoomChange"\n\tbn-iface="slider"\n></div>\n\n<div class="main w3-pale-blue">\n\t<div bn-show="showMessage">Sorry, no video device found !</div>\n\t<div \n\t\tbn-control="brainjs.camera" \n\t\tbn-event="cameraready: onCameraReady"\n\t\tbn-data="{constraints: {video: {facingMode: \'environment\'}}}"\n\t\tbn-iface="camera">\n\t\t\t\n\t\t</div>\t\n\t\n</div>\n',init:function(e){const t=new BarcodeDetector;let n=null;function o(){n.grabFrame().then(e=>t.detect(e)).then(e=>{if(0==e.length)setTimeout(o,1e3);else{console.log("barcodes",e);const{format:t,rawValue:n}=e[0];let a=null;a="qr_code"==t?{link:`<a href="${n}" target="_blank">${n}</a>`}:{format:t,value:n},$$.ui.showAlert({title:"BarCode Detected",content:a},()=>{o()})}}).catch(e=>{console.error("BarcodeDetection failed: ",e),$$.ui.showAlert({title:"Error",content:e.message})})}const a=$$.viewController(e,{data:{showMessage:!1,hasZoom:!1},events:{onCameraReady:function(e){console.log("onCameraReady");const t=$(this).iface();n=t.getImageCapture(),setTimeout(()=>{const e=t.getCapabilities();if(e.zoom){const n=t.getSettings(),{min:o,max:s,step:i}=e.zoom;a.scope.slider.setData({min:o,max:s,step:i}),a.scope.slider.setValue(n.zoom),a.setData({hasZoom:!0})}o()},500)},onZoomChange:function(e){const t=$(this).getValue();console.log("onZoomChange",t),a.scope.camera.setZoom(t)}}});$$.util.getVideoDevices().then(e=>{e.length>0?a.scope.camera.start():a.setData({showMessage:!0})})}});