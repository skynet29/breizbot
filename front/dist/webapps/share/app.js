$$.control.registerControl("filesPage",{deps:["breizbot.pager"],props:{userName:""},template:'<div bn-control="breizbot.files" \n\tstyle="height: 100%"\n\tbn-event="fileclick: onFileClick"\n\tbn-iface="files"\n\tbn-data="{friendUser: userName}"\n\t></div>',buttons:[{name:"reload",icon:"fa fa-sync-alt"}],init:function(e,t){const{userName:n}=this.props,i=$$.viewController(e,{data:{rootDir:"/",files:[],userName:n},events:{onFileClick:function(e,o){const r=i.model.rootDir+o.fileName;null!=$$.util.getFileType(o.fileName)&&t.pushPage("viewerPage",{title:o.name,props:{fullName:r,userName:n}})}}});this.onAction=function(e){"reload"==e&&i.scope.files.update()}}}),$$.control.registerControl("rootPage",{template:'<div class="toolbar">\n<p>Click on a user to see the files shared by him</p>\n</div>\n<div \n\tbn-control="breizbot.friends" \n\tbn-iface="friends" \n\tbn-event="friendclick: onSelectFriend"\n\tbn-data="{showConnectionState: false}"\n\t></div>',deps:["breizbot.pager"],init:function(e,t){$$.viewController(e,{data:{},events:{onSelectFriend:function(e,n){const{userName:i}=n;t.pushPage("filesPage",{title:i,props:{userName:i}})}}})}}),$$.control.registerControl("viewerPage",{deps:["breizbot.files"],template:'<div \n\tbn-control="breizbot.viewer" \n\tbn-data="{type, url}" \n\tstyle="height: 100%" \n\tbn-iface="viewer">\n\t\t\n\t</div>',props:{fullName:"",userName:""},init:function(e,t){const{fullName:n,userName:i}=this.props;$$.viewController(e,{data:{type:$$.util.getFileType(n),url:t.fileUrl(n,i)}})}});