$$.control.registerControl("rootPage",{deps:["breizbot.broker"],template:'<div class="message w3-text-red" bn-show="!homeboxConnected">Homebox not connected</div>\n<div class="scrollPanel" bn-show="homeboxConnected">\n    <table class="w3-table-all w3-centered">\n        <thead>\n            <tr class="w3-green">\n                <th>Alias</th>\n                <th>Type</th>\n                <th>State</th>\n                <th>Actions</th>\n            </tr>\n        </thead>\n        <tbody bn-each="devices" bn-event="click.action: onAction">\n            <tr bn-data="{deviceId: $scope.$i.deviceId}">\n                <td bn-text="$scope.$i.alias"></td>\n                <td bn-text="$scope.$i.type"></td>\n                <td bn-text="$scope.$i.state"></td>\n                <td bn-each="$scope.$i.actions" bn-iter="a"> \n                    <button class="action w3-btn w3-blue w3-margin-right" bn-data="{cmd: a.cmd}" bn-text="a.label"></button>\n                </td>\n            </tr>       \n\n        </tbody>\n    </table>\n</div>',init:function(t,e){const n=$$.viewController(t,{data:{devices:[],homeboxConnected:!1},events:{onAction:function(){const t=$(this).data("cmd"),n=$(this).closest("tr").data("deviceId");e.emitTopic("homebox.tplink.cmd",{cmd:t,deviceId:n})}}});e.register("homebox.tplink.status",t=>{var e=t.data||[];console.log("devices",e),n.setData({devices:e})}),e.register("breizbot.homebox.status",t=>{n.setData({homeboxConnected:t.data.connected})})}});