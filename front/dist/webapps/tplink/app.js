$$.control.registerControl("rootPage",{deps:["breizbot.broker"],template:'<div class="scrollPanel">\n    <table class="w3-table-all w3-centered">\n        <thead>\n            <tr class="w3-green">\n                <th>Alias</th>\n                <th>Type</th>\n                <th>State</th>\n                <th>Actions</th>\n            </tr>\n        </thead>\n        <tbody bn-each="devices" bn-event="click.action: onAction">\n            <tr bn-data="{deviceId: $i.deviceId}">\n                <td bn-text="$i.alias"></td>\n                <td bn-text="$i.type"></td>\n                <td bn-text="$i.state"></td>\n                <td bn-each="$i.actions" bn-iter="a"> \n                    <button class="action w3-btn w3-blue w3-margin-right" bn-data="{cmd: a.cmd}" bn-text="a.label"></button>\n                </td>\n            </tr>       \n\n        </tbody>\n    </table>\n</div>',init:function(t,e){const n=$$.viewController(t,{data:{devices:[]},events:{onAction:function(){const t=$(this).data("cmd"),n=$(this).closest("tr").data("deviceId");e.emitTopic("homebox.tplink.cmd",{cmd:t,deviceId:n})}}});e.register("homebox.tplink.status",t=>{var e=t.data||[];console.log("devices",e),n.setData({devices:e})})}});